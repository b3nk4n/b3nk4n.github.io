<!DOCTYPE html><html lang="en" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="How to Setup an eGPU on Ubuntu for TensorFlow" /><meta name="author" content="Benjamin Sautermeister" /><meta property="og:locale" content="en" /><meta name="description" content="I remember when I read about eGPUs for the first time. The symbiosis of having a light weight laptop at university or on the go, but still having a desktop like power horse when having some spare-time at home sounded like a dream. But everything faded into obscurity because I almost lost full interest into gaming the last years." /><meta property="og:description" content="I remember when I read about eGPUs for the first time. The symbiosis of having a light weight laptop at university or on the go, but still having a desktop like power horse when having some spare-time at home sounded like a dream. But everything faded into obscurity because I almost lost full interest into gaming the last years." /><link rel="canonical" href="https://b3nk4n.github.io/posts/setup-egpu-ubuntu-tensorflow/" /><meta property="og:url" content="https://b3nk4n.github.io/posts/setup-egpu-ubuntu-tensorflow/" /><meta property="og:site_name" content="Benjamin Kan" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2018-04-04T00:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="How to Setup an eGPU on Ubuntu for TensorFlow" /><meta name="twitter:site" content="@b3nk4n" /><meta name="twitter:creator" content="@b3nk4n" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Benjamin Sautermeister","url":"https://github.com/b3nk4n/"},"dateModified":"2024-12-19T20:05:52+01:00","datePublished":"2018-04-04T00:00:00+02:00","description":"I remember when I read about eGPUs for the first time. The symbiosis of having a light weight laptop at university or on the go, but still having a desktop like power horse when having some spare-time at home sounded like a dream. But everything faded into obscurity because I almost lost full interest into gaming the last years.","headline":"How to Setup an eGPU on Ubuntu for TensorFlow","mainEntityOfPage":{"@type":"WebPage","@id":"https://b3nk4n.github.io/posts/setup-egpu-ubuntu-tensorflow/"},"url":"https://b3nk4n.github.io/posts/setup-egpu-ubuntu-tensorflow/"}</script><title>How to Setup an eGPU on Ubuntu for TensorFlow | Benjamin Kan</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Benjamin Kan"><meta name="application-name" content="Benjamin Kan"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Benjamin Kan</a></div><div class="site-subtitle font-italic">Software Engineering. Cloud Native. Machine Learning. Game Development. Biking. Hiking. Mindfulness. Cooking.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-user ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/projects/" class="nav-link"> <i class="fa-fw fas fa-laptop-code ml-xl-3 mr-xl-3 unloaded"></i> <span>PROJECTS</span> </a><li class="nav-item"> <a href="/research/" class="nav-link"> <i class="fa-fw fas fa-microscope ml-xl-3 mr-xl-3 unloaded"></i> <span>RESEARCH</span> </a><li class="nav-item"> <a href="/learning/" class="nav-link"> <i class="fa-fw fas fa-book ml-xl-3 mr-xl-3 unloaded"></i> <span>LEARNING LOG</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/privacy/" class="nav-link"> <i class="fa-fw fas fa-user-lock ml-xl-3 mr-xl-3 unloaded"></i> <span>PRIVACY POLICY</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/b3nk4n" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/b3nk4n" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="https://www.linkedin.com/in/bkan/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://stackoverflow.com/users/3053918/b3nk4n" aria-label="stack-overflow" target="_blank" rel="noopener"> <i class="fab fa-stack-overflow"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>How to Setup an eGPU on Ubuntu for TensorFlow</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4 pb-5"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>How to Setup an eGPU on Ubuntu for TensorFlow</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1522792800" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Apr 4, 2018 </em> </span> <span> Updated <em class="" data-ts="1734635152" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Dec 19, 2024 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/b3nk4n/">Benjamin Sautermeister</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1269 words"> <em>7 min</em> read</span></div></div></div><div class="post-content"><p>I remember when I read about eGPUs for the first time. The symbiosis of having a light weight laptop at university or on the go, but still having a desktop like power horse when having some spare-time at home sounded like a dream. But everything faded into obscurity because I almost lost full interest into gaming the last years.</p><p>But this changed, since I’m spending a lot of time in deep learning since about two years. And it’s well known that taking advantage of a GPU boosts training time by a huge margin. That’s why I tried to get access to a high-performance graphics card in order to be able to train non-trivial networks and so some more serious research.</p><p>At first, I had a look at some offers in the cloud. I did not try out a GPU-enabled instance on AWS, because the use a billing based on a hourly rate. This means that you have to pay for a full hour, even when you just run a simple example for 1 minute. Next, I checkout out the 300$ free credit on Google compute engine. Unfortunately, the offer was limited to a 8-core CPU instance, while no GPU instance was available. Last but not least, I checked out <a href="https://www.floydhub.com/">FloydHub</a>, which actually worked quite well. The free version comes with 10 hours of GPU access on a <a href="https://www.nvidia.com/en-us/data-center/tesla-k80/">Nvidia Tesla K80</a>. However, this is a dual-GPU and you only get access to one of them, so the performance is actually worse than it looks like on most benchmarks.</p><p>After checking out some of these cloud platforms, I was still curious about how an eGPU performs with TensorFlow. There was basically no benchmark available regarding eGPU setups for Machine Learning. Most or even all of them are focused on pure gaming. And that’s why I thought: well, then do it yourself!</p><p>Of course, there were two big bullet points which made me hesitate some more days:</p><ul><li>High GPU prices due to crypto-currency mining<li>No official support and only very few resources for most eGPU systems on Linux</ul><p><strong>TL;DR</strong> Yes, it is worth it!</p><h2 id="installation"><span class="mr-2">Installation</span><a href="#installation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>While the setup of the eGPU on Windows is literally plug &amp; play, there is much more to do on Ubuntu 17.10. In this post, I wanted to share how I achieved to run a simple TensorFlow r1.6 example on the eGPU. The test-system in my case was the ThinkPad X1 Carbon 6th Gen.</p><h3 id="1-uefibios-security-settings"><span class="mr-2">1. UEFI/BIOS security settings</span><a href="#1-uefibios-security-settings" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>On my system, I had to disable some security features in the UEFI/BIOS settings. I had to disable the following, otherwise my eGPU was not detected:</p><ul><li>Secure Boot<li>Thunderbolt Security Level</ul><h3 id="2-install-nvidia-graphics-driver"><span class="mr-2">2. Install NVIDIA graphics driver</span><a href="#2-install-nvidia-graphics-driver" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Next, the graphics drivers have to be installed. These available driver versions for linux can be found on <a href="https://launchpad.net/~graphics-drivers/+archive/ubuntu/ppa">launchpad</a>. Interestingly, I installed the latest version 390 first, but after installing CUDA, the version 387.34 has been installed out of the sudden. I’m not sure whether CUDA is bundled with an appropriate graphics driver, but at least the version number changed after the installation. Nevertheless, I performed the following commands.</p><p>Optionally, uninstall old drivers first:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>apt-get purge nvidia<span class="k">*</span>
</pre></table></code></div></div><p>Then get and install the drivers:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>add-apt-repository ppa:graphics-drivers
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>apt-get update
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>nvidia-390
</pre></table></code></div></div><p>Replace the 390 with the version you would like to install. To verify the driver installation, you can use the following command:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span><span class="w"> </span>lsmod | <span class="nb">grep </span>nvidia
</pre></table></code></div></div><p>The output should be non-empty in case of success. A restart after the driver installation might be required.</p><p>To be able to use the <code class="language-plaintext highlighter-rouge">nvidia-smi</code> command, I added the following lines to my <code class="language-plaintext filepath highlighter-rouge">~/.bashrc</code> script:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="c"># NVIDIA driver and tools</span>
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$PATH</span><span class="s2">:/usr/lib/nvidia-390:/usr/lib/nvidia-390/bin"</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$LD_LIBRARY_PATH</span><span class="s2">:/usr/lib/nvidia-390:/usr/local/lib"</span>
</pre></table></code></div></div><p>Again, replace the version number with the version you installed previously.</p><p>The NVIDIA system management interface might still fail with an error. This is because you have to manually switch to your dedicated GPU first. This can be done using the following command:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>prime-select nvidia
</pre></table></code></div></div><p>As far as I know, this is kind of the Linux counterpart to <a href="https://en.wikipedia.org/wiki/Nvidia_Optimus">NVIDIA Optimus</a> on Windows. Enter the nvidia-smi command again, and you should get the anticipated output.</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="gp">$</span><span class="w"> </span>nvidia-smi
<span class="go">Tue Apr  4 23:33:18 2018       
+-----------------------------------------------------------------------------+                       
| NVIDIA-SMI 387.34               Driver Version: 387.34                      |                       
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap| Memory Usage         | GPU Util. Compute M. |
|===============================+======================+======================|
|   0  GeForce GTX 107...  Off  | 00000000:3E:00.0 Off |                  N/A |
|  0%  26C     P0    35W / 180W |       0MiB / 8114MiB |      4%      Default |
+-----------------------------------------------------------------------------+

+-----------------------------------------------------------------------------+
| Processes:                                                       GPU Memory |
|  GPU  PID     Process name                                       Usage      |
|=============================================================================|
|  No running processes found                                                 |
+-----------------------------------------------------------------------------+
</span></pre></table></code></div></div><blockquote class="prompt-info"><div><p>Please remember that the <code class="language-plaintext highlighter-rouge">prime-select</code> command has to be executed every time you reboot your system and reconnect your eGPU via Thunderbolt 3.</p></div></blockquote><h3 id="3-setup-tensorflow-with-gpu-support"><span class="mr-2">3. Setup TensorFlow with GPU support</span><a href="#3-setup-tensorflow-with-gpu-support" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The installation requirements for TensorFlow with GPU support can be found on the <a href="https://www.tensorflow.org/install/install_linux#nvidia_requirements_to_run_tensorflow_with_gpu_support">TensorFlow website</a>. However, I found the installation is still a bit tricky, especially because it is important to install the exact CUDA and cuDNN versions. That’s why I want to share the commands and links I have used nevertheless. In my case, I installed TensorFlow r1.6 via pip, which requires CUDA 9.0 and cuDNN 7.0. In my first try, I installed CUDA 9.1 and cuDNN 7.1, and it did not work. Importing TensorFlow in Python resulted therefore with a warning that the appropriate libraries could not be found.</p><h4 id="31-download-and-install-cuda-90"><span class="mr-2">3.1 Download and install CUDA 9.0</span><a href="#31-download-and-install-cuda-90" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>CUDA version 9.0 can be found on the <a href="https://developer.nvidia.com/cuda-90-download-archive">Nvidia Developer website</a>, while the latest version is available in the <a href="https://developer.nvidia.com/cuda-downloads">CUDA downloads</a>. I installed the main binary first, then followed by both batches. To install the binary, I used the following commands:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>dpkg <span class="nt">-i</span> cuda-repo-ubuntu1704-9-0-local_9.0.176-1_amd64.deb
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>apt-key add /var/cuda-repo-9-0-local/7fa2af80.pub
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>apt-get update
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>cuda
</pre></table></code></div></div><p>Furthermore, add something like this e.g. to your <code class="language-plaintext filepath highlighter-rouge">~/.bashrc</code> script:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="c"># NVIDIA CUDA</span>
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$PATH</span><span class="s2">:/usr/local/cuda/bin"</span>
<span class="nb">export </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$LD_LIBRARY_PATH</span><span class="s2">:/usr/local/cuda/lib64"</span>
</pre></table></code></div></div><h4 id="32-download-and-install-cudnn-70"><span class="mr-2">3.2 Download and install cuDNN 7.0</span><a href="#32-download-and-install-cudnn-70" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Navigate to the <a href="https://developer.nvidia.com/cudnn">cuDNN page</a>, register, and download the appropriate cuDNN version. In my case, I installed version 7.0.5, which was the latest version of the 7.0 release. Afterwards, you should set the <code class="language-plaintext highlighter-rouge">CUDA_HOME</code> environment variable, such as in your .bashrc script:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># NVIDIA cuDNN</span>
<span class="nb">export </span><span class="nv">CUDA_HOME</span><span class="o">=</span><span class="s2">"/usr/local/cuda"</span>
</pre></table></code></div></div><h4 id="33-install-gpu-enabled-tensorflow"><span class="mr-2">3.3 Install GPU-enabled TensorFlow</span><a href="#33-install-gpu-enabled-tensorflow" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>I usually recommend to use a virtual environment for every project:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>python3-pip python3-dev python-virtualenv
<span class="gp">$</span><span class="w"> </span>virtualenv <span class="nt">-p</span> python3 gpu-env
<span class="gp">$</span><span class="w"> </span><span class="nb">source </span>gpu-env/bin/activate
<span class="gp">(gpu-env) $</span><span class="w"> </span>pip <span class="nb">install </span>tensorflow-gpu<span class="o">==</span>1.6
<span class="gp">(gpu-env) $</span><span class="w"> </span>python
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span> import tensorflow as tf
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span> sess <span class="o">=</span> tf.InteractiveSession<span class="o">()</span>
<span class="go">
2018-04-04 01:11:50.496859: I tensorflow/core/platform/cpu_feature_guard.cc:140] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
2018-04-04 01:11:51.911926: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:898] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2018-04-04 01:11:51.912711: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1212] Found device 0 with properties: 
name: GeForce GTX 1070 Ti major: 6 minor: 1 memoryClockRate(GHz): 1.683
pciBusID: 0000:3e:00.0
totalMemory: 7.92GiB freeMemory: 7.81GiB
2018-04-04 01:11:51.912725: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1312] Adding visible gpu devices: 0
</span><span class="gp">2018-04-04 01:11:52.376920: I tensorflow/core/common_runtime/gpu/gpu_device.cc:993] Creating TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7543 MB memory) -&gt;</span><span class="w"> </span>physical GPU <span class="o">(</span>device: 0, name: GeForce GTX 1070 Ti, pci bus <span class="nb">id</span>: 0000:3e:00.0, compute capability: 6.1<span class="o">)</span>
<span class="go">
</span><span class="gp">&gt;</span><span class="o">&gt;&gt;</span>
</pre></table></code></div></div><p>Hell yeah, we are finally ready to rumble!</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/machine-learning/'>Machine Learning</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/tensorflow/" class="post-tag no-text-decoration" >tensorflow</a> <a href="/tags/egpu/" class="post-tag no-text-decoration" >egpu</a> <a href="/tags/performance/" class="post-tag no-text-decoration" >performance</a> <a href="/tags/linux/" class="post-tag no-text-decoration" >linux</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=How+to+Setup+an+eGPU+on+Ubuntu+for+TensorFlow+-+Benjamin+Kan&url=https%3A%2F%2Fb3nk4n.github.io%2Fposts%2Fsetup-egpu-ubuntu-tensorflow%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=How+to+Setup+an+eGPU+on+Ubuntu+for+TensorFlow+-+Benjamin+Kan&u=https%3A%2F%2Fb3nk4n.github.io%2Fposts%2Fsetup-egpu-ubuntu-tensorflow%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fb3nk4n.github.io%2Fposts%2Fsetup-egpu-ubuntu-tensorflow%2F&text=How+to+Setup+an+eGPU+on+Ubuntu+for+TensorFlow+-+Benjamin+Kan" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fb3nk4n.github.io%2Fposts%2Fsetup-egpu-ubuntu-tensorflow%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/find-model-hyperparams-with-hyperopt/">Find your model's optimal hyperparameters with Hyperopt</a><li><a href="/posts/setup-egpu-ubuntu-tensorflow/">How to Setup an eGPU on Ubuntu for TensorFlow</a><li><a href="/posts/benchmark-tensorflow-egpu/">Benchmarking TensorFlow Performance on eGPU</a><li><a href="/posts/manage-java-env/">Manage Your Java Environment</a><li><a href="/posts/sharing-command-line-options-python-argparse/">Sharing Command-line Options in Python Argparse</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/windows-phone/">windows phone</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/downloads/">downloads</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/uwp/">uwp</a> <a class="post-tag" href="/tags/csharp/">csharp</a> <a class="post-tag" href="/tags/tensorflow/">tensorflow</a> <a class="post-tag" href="/tags/deep-learning/">deep learning</a> <a class="post-tag" href="/tags/game-dev/">game dev</a> <a class="post-tag" href="/tags/performance/">performance</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/benchmark-tensorflow-egpu/"><div class="card-body"> <em class="small" data-ts="1523916000" data-df="ll" > Apr 17, 2018 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Benchmarking TensorFlow Performance on eGPU</h3><div class="text-muted small"><p> In the last post, I wrote about how to setup an eGPU on Ubuntu to get started with TensorFlow. I shortly mentioned that a eGPU is definitely worth it for Machine Learning, but I did not tell any nu...</p></div></div></a></div><div class="card"> <a href="/posts/why-tensorflow-from-source/"><div class="card-body"> <em class="small" data-ts="1496008800" data-df="ll" > May 29, 2017 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Why should I install TensorFlow from Source?</h3><div class="text-muted small"><p> There are various ways to install TensorFlow. For instance, you can install it using a Docker image or Python’s package manager pip. But since the version 1.0 release of TensorFlow, you probably mi...</p></div></div></a></div><div class="card"> <a href="/posts/speed-up-your-windows-phone-app/"><div class="card-body"> <em class="small" data-ts="1386284400" data-df="ll" > Dec 6, 2013 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Speed Up Your Windows Phone App</h3><div class="text-muted small"><p> You have a Windows Phone app and are not happy about its performance? Well, I had this feeling with a few of my apps recently. But don’t worry. There are a few simple tweaks you could do to gain si...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/find-model-hyperparams-with-hyperopt/" class="btn btn-outline-primary" prompt="Older"><p>Find your model's optimal hyperparameters with Hyperopt</p></a> <a href="/posts/benchmark-tensorflow-egpu/" class="btn btn-outline-primary" prompt="Newer"><p>Benchmarking TensorFlow Performance on eGPU</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/b3nk4n">Benjamin Kan</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/windows-phone/">windows phone</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/downloads/">downloads</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/uwp/">uwp</a> <a class="post-tag" href="/tags/csharp/">csharp</a> <a class="post-tag" href="/tags/tensorflow/">tensorflow</a> <a class="post-tag" href="/tags/deep-learning/">deep learning</a> <a class="post-tag" href="/tags/game-dev/">game dev</a> <a class="post-tag" href="/tags/performance/">performance</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-2V2DLEFQQ9"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-2V2DLEFQQ9'); }); </script>
